# ScriptVoid

Old project from about 6 months ago. A full-featured site for sharing and browsing Roblox Lua scripts.

**Users:** Sign up (with Turnstile), log in, verify email, forgot/reset password. Account settings: change username, bio, avatar, email, password, or delete account. Browse scripts with search and filters, view script pages with code and comments, like scripts, report scripts or comments. Each user has a public profile with their scripts and stats.

**Scripts:** Upload scripts (title, game ID or universal, features, code, thumbnail from Roblox or custom upload to R2). Edit or delete your own. Scripts have views, likes, comments; visibility can be public, private, or secret. Optional key system link and Discord server link.

**Promotions and leaderboard:** Scripts can be bumped (promotion tiers I–IV) for more visibility; bump decay and script decay run on cron. User leaderboard ranks by total script views. Promo codes can be generated by admins and redeemed for bump/benefits.

**Creator side:** Creator dashboard and a small “simulator” that explains how the ranking/bump system works. API docs on the creator page for the public script endpoints.

**Admin:** Staff roles (junior mod up to owner) with different permissions. Admins can timeout users (with reason and duration), delete any script or comment, delete user accounts, verify accounts, generate and manage promo codes, view stats, and toggle a dashboard shutdown (maintenance) flag. Admin actions are gated by JWT + optional second-factor tokens.

**Cron jobs:** Decay (script points over time), bump decay, promotion decay, auto-return of promotions, process user timeouts, update leaderboard and multipliers, update user stats, promo code cleanup. All cron routes expect a shared secret in the Authorization header.

**Fast loading:** Browse and search are built on a dedicated fast path so the home and search feel snappy. `/api/scripts/fast` returns newest and popular scripts with a small, fixed set of fields (no full comment bodies), and `/api/scripts/fast-search` does the same for search. Both sit behind an in-memory smart cache (short TTL, invalidated when scripts are created, updated, or deleted) so repeat hits don’t hit the DB. MongoDB is used with connection pooling and retry/backoff; there’s also a cache warmer and batch processor for heavier admin/cron work. Rate limiting on the fast endpoints keeps abuse in check.

**Stack:** Next.js 15 (App Router), React 19, TypeScript, Tailwind. Backend is MongoDB (native driver + Mongoose in a couple of places). Auth is JWT in httpOnly cookies, email via Resend, thumbnails on Cloudflare R2, optional Redis for rate limiting. Turnstile for signup/login.

Copy `.env.example` to `.env`, fill in the vars, then `npm install` and `npm run dev`. For a full UI you can drop `default.png`, `og-image.webp`, and `favicon.png` into `public/` if you want.

Looking back I could’ve just used Prisma and PostgreSQL and been done with it. I went with MongoDB on purpose so I’d have to figure out the raw queries, connection pooling, and caching myself. Ended up learning a lot from it.
